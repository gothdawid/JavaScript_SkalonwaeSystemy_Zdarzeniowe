<!DOCTYPE html>
<html>
    <head>
        <title>Tytuły</title>
    </head>
    <body>
        <h1>Tytuły:</h1>
        <table border="1px" cellspacing="0" cellpadding="5px">
            <tr>
                <th>Tytuł</th>
                <th>Autor</th>
                <th>Akcja</th>
            </tr>
            <!-- If list is empty -->
            <% if (titles.length <= 0) { %>
                <tr>
                    <td colspan="3">Brak tytułów</td>
                </tr>
            <% } %>
            <% for (let i = 0; i < titles.length; i++) { %>
                <tr>
                    <form action="/titles/" method="post">
                        <td>
                            <input type="text" name="old_title" value="<%= titles[i].title %>">
                        </td>
                        <td>
                            <input type="text" name="old_author" value="<%= titles[i].author.firstName + ' ' + titles[i].author.lastName %>">
                        </td>
                        <td>
                            <input type="hidden" name="title_id" value="<%=titles[i]._id %>">
                            <input type="hidden" name="author_id" value="<%=titles[i].author._id %>">
                            <input type="submit" name="action" value="Edit">
                            <input type="submit" name="action" value="Delete">
                        </td>
                    </form>

                </tr>
            <% } %>
        </table>
        <br />
        <form action="/titles/" method="post">
            <label for="title">Title: </label>
            <input type="text" name="title" id="title" placeholder="Title...">
            <label for="author">Author: </label>
            <input type="text" name="author" id="author" placeholder="Author...">
            <input type="submit" value="Submit">
        </form>
        
        <!-- Error from backend -->
        <% if (error) { %>
            <p><%= error %></p>
        <% } %>
    </body>
</html>